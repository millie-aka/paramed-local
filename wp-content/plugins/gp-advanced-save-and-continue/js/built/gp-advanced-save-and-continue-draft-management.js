(()=>{"use strict";var e=window.jQuery,n=(null===window||void 0===window?void 0:window.GPASC_DRAFT_MANAGEMENT).strings,t=function(){function t(n){this.formId=n.formId,this.nonce=n.nonce,this.ajaxUrl=n.ajaxUrl,this.userId=n.userId,this.$container=e(this.userId?"#gpasc_resume_token_list_".concat(n.formId,'[data-user-id="').concat(n.userId,'"]'):"#gpasc_resume_token_list_".concat(n.formId,":not([data-user-id])")),this.bind()}return t.prototype.bind=function(){var t=this;this.$container.on("click",".gpasc-delete-draft-button",(function(r){return a=t,o=void 0,i=function(){var t,a,o,s,i,c;return function(e,n){var t,r,a,o,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(c){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,i[0]&&(s=0)),s;)try{if(t=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1],a=i;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(i);break}a[2]&&s.ops.pop(),s.trys.pop();continue}i=n.call(e,s)}catch(e){i=[6,e],r=0}finally{t=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(u){switch(u.label){case 0:if(!window.confirm(n.confirm_delete_draft))return[2];t=r.currentTarget.dataset.gpascResumeToken,a=r.currentTarget,(o=e(a).children("span")).removeClass("dashicons-trash"),o.addClass("dashicons-update gpasc-loader-spin"),(s=new URLSearchParams).append("action","gpasc_delete_draft"),s.append("nonce",this.nonce),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,e.ajax({url:"".concat(this.ajaxUrl,"?").concat(s.toString()),type:"POST",data:{resumeToken:t,formId:this.formId,userId:this.userId}})];case 2:if((i=u.sent()).error)throw new Error(i.error);return e(a).parents("li").remove(),[3,4];case 3:return c=u.sent(),console.error(c),alert("Failed to delete draft: ".concat(c.message)),o.removeClass("dashicons-update gpasc-loader-spin"),o.addClass("dashicons-trash"),[3,4];case 4:return[2]}}))},new((s=void 0)||(s=Promise))((function(e,n){function t(e){try{c(i.next(e))}catch(e){n(e)}}function r(e){try{c(i.throw(e))}catch(e){n(e)}}function c(n){var a;n.done?e(n.value):(a=n.value,a instanceof s?a:new s((function(e){e(a)}))).then(t,r)}c((i=i.apply(a,o||[])).next())}));var a,o,s,i}))},t}();window.GPAdvancedSaveAndContinueDraftManagement=t})();
//# sourceMappingURL=gp-advanced-save-and-continue-draft-management.js.map