
# Changelog

## 1.2.20 | July 17, 2024

- Fixed an issue where using dates before January 1, 1970 in calculations wouldn't work as expected due to it being the Unix Epoch.

## 1.2.19 | June 28, 2024

- Fixed regression where some date formats would not work correctly.

## 1.2.18 | June 26, 2024

- Fixed issue where Conditional Logic Dates did not work with the [Field to Field Conditional Logic snippet](https://github.com/gravitywiz/snippet-library/blob/master/gravity-forms/gw-field-to-field-conditional-logic.php).

## 1.2.17

- Fixed PHP warning. (Credit: [@navidabdi](https://github.com/navidabdi), [@sun](https://github.com/sun))

## 1.2.16

- Fixed issue where using "greater than" or "less than" to compare a Date field with a blank value no longer worked. While this restores that functionality, please considered it deprecated. Use "is" or "is not" to confirm if a Date field has a value.
- Fixed issue where blank rule values could generate a fatal error when using the greater than or less than operator.

## 1.2.15

- Fixed an issue where checking for an empty Date field via conditional logic did not work as expected.

## 1.2.14

- Updated remaining references to `String.prototype.format()` to use `String.prototype.gformFormat()` as the former is removed in Gravity Forms 2.8.

## 1.2.13

- Added `%nextYear%` variable to allow including the next year in a {today} modifier. Example: `{today:first Monday of September %nextYear%}`

## 1.2.12

- Updated references to `String.prototype.format()` to use `String.prototype.gformFormat()` as the former will be removed in Gravity Forms 2.8.

## 1.2.11

- Added new [`gpcld_use_visitor_timezone`](https://gravitywiz.com/documentation/gpcld_use_visitor_timezone/) filter hook.

## 1.2.10

- Fixed an issue with conditional logic flyout click.

## 1.2.9

- Fixed performance issue when working with lots of date-based conditional logic rules.

## 1.2.8

- Fixed PHP 8 warnings.

## 1.2.7

- Fixed potential PHP 8 warnings.

## 1.2.6

- Added German translations. Credit: Florian Rinnhofer of sportunion.at

## 1.2.5

- Fixed notice generated when a rule's field ID property was not a numeric field ID.

## 1.2.4

- Fixed issue where invalid operators appeared for Current Time conditional logic rules.
- Added support for the `gpcldBaseDate` property to support our new [Auto Rule Groups](https://github.com/gravitywiz/snippet-library/blob/master/gp-conditional-logic-dates/gpcld-auto-rule-groups.php) snippet.

## 1.2.3

- Added support for processing conditions if date fields are HTML5 date inputs.

## 1.2.2

- Fixed issue where conditional logic date/time rules for the Next Button wouldn't reliably save.

## 1.2.1

- Updated minimum WordPress version from 3.4.2 to 5.3.0.

## 1.2

- Fixed potential PHP notices if fields have been deleted.
- Updated default frontend behavior to use the server timezone rather than the visitor's device timezone as the backend logic has always validated using the server timezone.
- Fixed incorrect timezone conversion when using the `gpcld_enable_utc_timezone` JavaScript filter.
- Added "Update URI" to plugin header to improve security.

## 1.1.1

- Fixed an issue where poorly formatted times could result in conditional logic failing.

## 1.0.16

- Fixed issues with the new conditional logic flyout in the GF 2.5. form editor. (#5)
- Fixed issue where any merge tag rule value was replaced instead of only our merge tags.
- Fixed issue with Gravity Forms 2.5 where field containers no longer used list items.

## 1.1

- Fixed issues with the new conditional logic flyout in the GF 2.5. form editor. (#5)
- Fixed issue where any merge tag rule value was replaced instead of only our merge tags.
- Fixed issue with Gravity Forms 2.5 where field containers no longer used list items.

## 1.0.15

- Fixed issue where month wildcards were not working as expected.

## 1.0.14

- Fixed issue where merge tags such as {today} wouldn't work with conditional logic in Gravity Flow steps.
- Fixed issue where 12pm was treated as midnight of the next day.

## 1.0.13

- Fixed JS error generated by time-based conditional logic when Time field was empty.

## 1.0.12

- Fixed issue where Read-Only-enabled Datepicker fields were not correctly evaluated when the datepicker was disabled.

## 1.0.11

- Fixed issue where specifying non-lowercased am/pm times in time-based conditional logic rules failed to evaluate correctly.

## 1.0.10

- Fixed regression where valid timestamps were not correctly identified causing issues with date-based conditional logic evaluation.

## 1.0.9

- Fixed issue where conditional logic is evaluated for form object that has not had its date values converted.

## 1.0.8

- Fixed notice generated when invalid form is passed via GF filters.
- Updated plugin author.

## 1.0.7

- Fixed issue where dates were not replaced with timestamps on payment callbacks.

## 1.0.6

- Updated frontend JS to handle the date selection requirement for conditional logic evaluation to match how it is handled by PHP.
- Added JS and PHP hook "gpcld_require_date_selection" to disable date selection requirement for conditional logic evaluation.

## 1.0.5

- Fixed issue when validating dates in January.

## 1.0.4

- Fixed issue with GP Limit Dates where inline datepickers used in conditional logic did not evaluate correctly.

## 1.0.3

- Fixed issue where fields with date-based conditional logic appearing in the order summary were not correctly evaluated in the admin.
Added support for style/script minification.
- Fixed whitespace

## 1.0.2

    - Added support for Date Field and Date Dropdown as the Date Input Type

## 1.0.1

- Added support for converting time-based conditional logic to use UTC timezone.

## 1.0

- Updated version to 1.0; all features are considered very stable.
- Updated minimum GF version to 2.0.

## 1.0.beta6.4

    - Fixed issue where time-based conditionals were not evaulated correctly when based on entry (rather than posted values).

## 1.0.beta6.3

    - Fixed issue where wildcard date comparision generated a JS error; they were still using the old method for fetching the date format.

## 1.0.beta6.2

    - Removed input mask from the rule value input for date-based conditional logic rules; allows merge tags to be used (i.e. {today})

## 1.0.beta6.1

    - Added support for processing conditional logic on GF feeds.

## 1.0.beta6.0

    - Added support for Time fields.
    - Added support for Datepicker when specifying date-based conditional logic rules.
    - Added support for Time & Datepicker UI helpers when creating date-and-time-based conditional logic rules in other places than the form editor.
    - Updated conditional logic events to use 'gfield_trigger_change' class rather than manually adding logic events to input markup.
    - Updated inline form script; it has been moved to the gp-conditional-logic-dates.js file.

## 1.0.beta5.18

    - Fixed issue where admin scripts were output before prematurely

## 1.0.beta5.17

    - Fixed issue caused by WC GF Product Add-ons plugin; prematurely caches values before appropriate functionality can be applied.

## 1.0.beta5.16

    - Fixed issue when selected date was 01/01/1970.

## 1.0.beta5.15

    - Fixed issue when comparing a date to the {sunday} special merge tag.

## 1.0.beta5.14

    - Added support for wildcard rule values: 9/20/* would match Sept 20th of any year.

## 1.0.beta5.13

    - Fixed issue where date-based conditional logic on Page fields was not processed correctly

## 1.0.beta5.12

    - Fixed issue where empty dates compared with {sunday} evalulated as true
    - Fixed issue where admin scripts were not enqueued on all applicable pages

## 1.0.beta5.11

    - Fixed issue where "Current Time" failed validation if time value was after current time

## 1.0.beta5.10

    - Fixed issue where "Current Time" compared to 12:XXpm would fail

## 1.0.beta5.9

    - Fixed issue where form w/ only "Current Time" conditional logic did not register as GPCLD-enabled

## 1.0.beta5.8

    - Added support for "Current Time" as a special field in the conditional logic field drop down
    - Updated perk to use GP_Bootstrap

## 1.0.beta5.7

    - Fixed issue where modify_frontend_form_object() was expecting two parameters though it only required one

## 1.0.beta5.6

    - Fixed issue where Post Custom Field with Date input type were not supported

## 1.0.beta5.5

    - Update {today} merge tag to use configured WP time as the base timestamp

## 1.0.beta5.4

    - Fixed issue where $form object was not correclty return for forms that did not contain date-based conditional logic
    - Fixed issue where inline scripts output in footer were still output too early

## 1.0.beta5.3

    - Updated inline script to output in footer (fixes issues when GF scripts loaded in footer)

## 1.0.beta5.2

    - Added support for {monday} - {sunday} merge tags for determining the day of the week

## 1.0.beta5.1

    - Fixed issue where adding Date field to form when WP_DEBUG was enabled would cause JS error.

## 1.0.beta5.0

    - Added support for {month} and {day} merge tags; can be used to check logic by month month (e.g. '7/{day}/{month}') or by day (e.g. '{month}/15/{year}')

## 1.0.beta4.1

    - Fixed issue where gf_apply_rules() was being called for Date fields when conditional logic was not applied
    - Fixed conflict with OptimizePress theme which outputs inline scripts earlier than expected
    - Updated {year} merge tag to support a modifier (i.e. "+1 year", "+2 years")

## 1.0.beta4.0

    - Added support for special {year} merge tag; available only for date-based conditional logic

## 1.0.beta3.11

    - Fixed issue where date fields in different formats (dot/dash) were not interpreted correctly

## 1.0.beta3.10

    - Rolled back changes where timestamp conversion happened when the form was retrieved from database; will be updated soon to convert only when processing date logic.

## 1.0.beta3.9

    - Updated conditional logic so that a date must be selected before logic is processed

## 1.0.beta3.8

    - Updated how form object was filtered for conversion of dates to timestamps in conditional logic rules; happens globally now excluding the form editor

## 1.0.beta3.7

    - Added support for Date fields in routing conditions (requires Gravity Forms v1.9.5.7)
    - Added documentation link to first draft post

## 1.0.beta3.6

- Fixed issue where inline form script was output incorrectly on AJAX forms
- Fixed issue where conditional logic was not working when resending notifications (for real this time with more to come)

## 1.0.beta3.5

- Fixed issue where conditional logic was not working when resending notifications

## 1.0.beta3.4

    - Fixed issue where conditional logic was not working when processed in the backend

## 1.0.beta3.3

    - Fixed issue on Entry Detail view where gform object was not avaialble

## 1.0.beta3.2

    - Fixed issue where in some cases date format was not specified

## 1.0.beta3.1

    - Added support for allowing conditional logic date fields to use all GF date formats

## 1.0.beta3.0

    - Updated add-on to work with Gravity Forms 1.9

## 1.0.beta2

- Removed are_dates_converted() method in favor of validating whether the value has been converted to a timestamp yet

## 1.0.beta1.2

- Fixed issue where conditional logic date value conversion was not happening when navigating backwards through a form

## 1.0.beta1.1

- Fixed issue where conditional logic date value conversion was failing on multi-page forms

## 1.0.beta1

- Updated which GF hooks are used to auto-convert date-based conditional logic rules in the $form object

## 0.4

- Added support for converting date-based conditional logic rule values on pre-submission and pre-validation; makes it easier for plugins to integrate
