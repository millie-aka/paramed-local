!function(f){window.GPMultiPageNavigation=function(t){var u=this;u.formId=t.formId,u.$formElem=f("form#gform_"+u.formId),u.lastPage=t.lastPage,u.activationType=t.activationType,u.labels=t.labels,u.enableSubmissionFromLastPageWithErrors=t.enableSubmissionFromLastPageWithErrors,u.addedButtons=[],u.init=function(){window.gform.addAction("gppt_after_transition",function(t){u.updateUI(),f("input#gw_page_progression").val(t.currentPage)});f(document).on("click","a.gpmpn-page-link, a.gwmpn-page-link, .gpmpn-page-link a",function(t){t.preventDefault();var e=f(this).attr("href").split("#");if(2<=e.length){var n,a=f(this).parents("form"),r=(n=0<(n=0<a.length?a:f(".gform_wrapper form")).length?n:f(".gform_wrapper").parent("form")).attr("id").split("_")[1],o=e.pop();GPMultiPageNavigation.postToPage(o,r,!0)}}),u.updateUI()},u.updateUI=function(){(u.$formElem.length<=0&&(u.$formElem=f("#gform_wrapper_"+u.formId)),u.$footer=f("#gform_page_"+u.formId+"_"+u.getCurrentPage()+" .gform_page_footer"),u.$saveAndContinueButton=u.$footer.find("a.gform_save_link"),"last_page"!=u.activationType||u.isLastPageReached())&&(u.$formElem.find(".gf_step").each(function(t){var e=t+1;"progression"==u.activationType&&e>u.getPageProgression()||(e!=u.getCurrentPage()?f('a[href="#'+e+'"]').length&&f(this).hasClass("gpmpn-step-linked")||f(this).html(u.getPageLinkMarkup(e,f(this).html())).addClass("gpmpn-step-linked"):(f(this).find("a").children().unwrap(),f(this).find("a").remove(),f(this).addClass("gpmpn-step-current"),f(this).addClass("gf_step_active")))}),"last_page"==u.activationType&&!u.isLastPage()&&u.isLastPageReached()?u.addBackToLastPageButton():"progression"==u.activationType&&u.getCurrentPage()<u.getPageProgression()?u.addBackToLastPageButton(u.getPageProgression()):!u.isLastPage()&&u.wasFinalSubmissionAttempted()&&u.addNextPageWithErrorsButton(),u.$formElem.data("GPMultiPageNavigation",u),window["gpmpn_"+u.formId]=u)},u.getPageLinkMarkup=function(t,e){return'<a href="#'+t+'" class="gwmpn-page-link gwmpn-default gpmpn-page-link gpmpn-default">'+e+"</a>"},u.addBackToLastPageButton=function(t){var e='<input type="button" onclick="GPMultiPageNavigation.postToPage( '+(t=void 0===t?u.lastPage:t)+", "+u.formId+' );" value="'+u.labels.backToLastPage+'" class="button gform_button gform_last_page_button">';u.insertButton(e)},u.addNextPageWithErrorsButton=function(){var t=1<u.getErrorPagesCount()?u.labels.nextPageWithErrors:u.labels.submit,e=1<u.getErrorPagesCount()?"gform_next_page_errors_button":"gform_resubmit_button",n='<input type="button" onclick="GPMultiPageNavigation.postToPage( 0, '+u.formId+' );" value="'+t+'" class="button gform_button '+e+'">';u.getErrorPagesCount()<=1&&!u.enableSubmissionFromLastPageWithErrors?u.addBackToLastPageButton():u.insertButton(n)},u.insertButton=function(t){0<=u.addedButtons.indexOf(t)||(0<u.$saveAndContinueButton.length?u.$saveAndContinueButton.before(t):u.$footer.append(t),u.addedButtons.push(t))},u.getCurrentPage=function(){return u.$formElem.find("input#gform_source_page_number_"+u.formId).val()},u.getPageProgression=function(){return parseInt(f("input#gw_page_progression").val())},u.getErrorPagesCount=function(){return u.errorPagesCount||(u.errorPagesCount=u.$formElem.find("input#gw_error_pages_count").val()),u.errorPagesCount},u.isLastPage=function(){return u.getCurrentPage()>=u.lastPage},u.isLastPageReached=function(){return u.isLastPage()||1==u.$formElem.find("input#gw_last_page_reached").val()},u.wasFinalSubmissionAttempted=function(){return 1==u.$formElem.find("input#gw_final_submission_attempted").val()},GPMultiPageNavigation.postToPage=function(t,e,n){var a=f("form#gform_"+e),r=a.find("input#gform_target_page_number_"+e),o=u.getCurrentPage();r.val(t);var i=window["GPPageTransitions_"+e];if(void 0!==i&&i.enableSoftValidation){if(!n&&!i.validate())return;var s=u.$formElem.find(".swiper-slide:not(.swiper-slide-disabled"),g=u.$formElem.find("#gform_page_"+u.formId+"_"+t);return i.swiper.slideTo(s.index(g)),i.currentPage=t,i.sourcePage=o,i.updateProgressIndicator(o),void u.$formElem.trigger("softValidationPageLoad.gppt",[t,o,e])}if(n){var p=f('<input type="hidden" name="gw_bypass_validation" id="gw_bypass_validation" value="1" />');a.append(p)}a.find(".gform_page_footer:visible").find('input[type="submit"], input[type="button"]').not(":visible").css({display:"block",visibility:"hidden",position:"absolute"}),0===parseInt(t)&&(f("#gform_submit_button_"+e).appendTo(".gform_page_footer:visible").css({display:"block",visibility:"hidden",position:"absolute"}),gform.addFilter("gform_spinner_target_elem",function(t){gform.removeFilter("gform_spinner_target_elem",10,"gpmpn_set_spinner_target");var e=f(".gform_next_page_errors_button:visible, .gform_resubmit_button:visible");return e.length?e:t},10,"gpmpn_set_spinner_target")),a.submit()},u.init()}}(jQuery),window.gformOrigInitSpinner=window.gformInitSpinner,window.gformInitSpinner=function(t,e){void 0!==e&&e||(e=gform.applyFilters("gform_spinner_url",gf_global.spinnerUrl,t));var n=jQuery("#gform_"+t);n.submit(function(){0==jQuery("#gform_ajax_spinner_"+t).length&&n.find(".gform_page_footer").append('<img id="gform_ajax_spinner_'+t+'"  class="gform_ajax_spinner" src="'+e+'" alt="" />')})};
//# sourceMappingURL=gp-multi-page-navigation.js.map